{% extends 'base2.html' %}
{% load static %}

{% block content %}
<script src="{% static 'javascript/write.js' %}"></script>
<div class="right">
    <div class="writebar">
        <p id="writeTitle">글쓰기</p>
        <p id="subTitle">정보 게시판 & 후기 게시판 & 우리동네 게시판</p>
        <i class="fa-solid fa-repeat fa-lg"></i>
    </div>
    <form action = "" method="POST" enctype="multipart/form-data">
        {% csrf_token %} 
        <div class="writebox">
            <div class="selectBox1">
                <select name="board_type" id="postType">
                    <option value="none" hidden>게시판 선택</option>
                    <optgroup label="정보게시판">
                        <option value="0">월세 정보 공유</option>
                        <option value="1">전세 정보 공유</option>
                        <option value="2">매매 정보 공유</option>
                    </optgroup>
                    <optgroup label="후기게시판">
                        <option value="3">월세 후기</option>
                        <option value="4">전세 후기</option>
                        <option value="5">매매 후기</option>
                    </optgroup>
                    <optgroup label="우리동네 게시판">
                        <option value="6">우리동네 현황</option>
                        <option value-="7">범죄자 거주 정보</option>
                    </optgroup>
                </select>
                <select name="city" id="location" onchange="addressKindChange(this)">
                    <option value="none" hidden>시/도 선택</option>
                    <option value="Seoul">서울</option>
                    <option value="Gyeonggi">경기</option>
                    <option value="Incheon">인천</option>
                    <option value="Gangwon">강원</option>
                    <option value="Daejeon">대전</option>
                    <option value="Sejong">세종</option>
                    <option value="Chungnam">충남</option>
                    <option value="Chungbuk">충북</option>
                    <option value="Busan">부산</option>
                    <option value="Ulsan">울산</option>
                    <option value="Gyeongnam">경남</option>
                    <option value="Gyeongbuk">경북</option>
                    <option value="Daegu">대구</option>
                    <option value="Gwangju">광주</option>
                    <option value="Jeonnam">전남</option>
                    <option value="Jeonbuk">전북</option>
                    <option value="Jeju">제주</option>
                </select>
                <select name="country" id="Location2">
                    <option value="none" hidden>구/군 선택</option>
                </select>
            </div>
            <input type="text" id="TitleInput" name="title" placeholder="제목을 입력해주세요.">
            <div class="toolbox">
                <label for="imageFile">
                    <i class="fa-regular fa-image"></i>
                </label>
                <input type="file" name="image" accept="image/*" id="imageFile" style="display: none;">
                {% comment %} 
                <button id="open-modal2">
                    <i class="fa-solid fa-video"></i>
                </button>
                {% endcomment %}
                <label for="videoFile">
                    <i class="fa-solid fa-video" id="videoIcon"></i>
                </label>
                <input type="file" name="video" accept="video/*" id="videoFile" style="display:none;">
                <label for="File">
                    <i class="fa-regular fa-folder" id="folder"></i>
                </label>
                <input type="file" name="file" accept="file/*" id="fileFile" style="display: none;">
                <!--나중에 구현
                <i class="fa-solid fa-link"></i>
                <i class="fa-solid fa-location-dot"></i>
                -->
            </div>
            <textarea name="content" id="content" placeholder="내용을 입력해주세요."></textarea>
        </div>
        <input type="submit" value="등록하기" id="submitButton">
    </form>
</div>
    
<script>
    // JavaScript
    var imageIcon = document.querySelector('.fa-regular.fa-image');
    var imageInput = document.getElementById('imageFile');
    var textareaContainer = document.getElementById('textareaContainer');

    imageIcon.addEventListener('click', function () {
        imageInput.click();
    });

    imageInput.addEventListener('change', function () {
        var file = imageInput.files[0];
        var reader = new FileReader();

        reader.onload = function (e) {
            var img = document.createElement('img');
            img.src = e.target.result;
            img.style.width = '50px'; // 이미지의 가로 크기 설정
            img.style.height = '70px'; // 이미지의 세로 크기 설정
            textareaContainer.appendChild(img);
        };

        reader.readAsDataURL(file);

        // Reset the value of the input
        imageInput.value = null;
    });
</script>
{% comment %} 
<div id="modal">
    <div class="modal-content">
        <p>사진 첨부</p>
        <input type="file" name="image_file" accept="image/*" id="bizFile">
        <div class="custom">
            <label for="bizFile" class="btn fileBtn">
                <div class="imagebox">
                    <i class="fa-solid fa-folder-plus fa-lg"></i>
                </div>
            </label>
            <span id="fileName">또는<br>이곳에 사진 파일을<br>끌어놓으세요.</span>
        </div>
        <button id="close-modal">X</button>
    </div>
</div>
<div id="modal2">
    <div class="modal-content2">
        <p>동영상 첨부</p>
        <input type="file" name="video_file" accept="video/*" id="bizFile2">
        <div class="custom">
            <label for="bizFile2" class="btn fileBtn">
                <div class="videobox">
                    <i class="fa-solid fa-folder-plus fa-lg"></i>
                </div>
            </label>
            <span id="fileName2">또는<br>이곳에 동영상 파일을<br>끌어놓으세요.</span>
        </div>
        <button id="close-modal2">X</button>
    </div>
</div>
<div id="modal3">
    <div class="modal-content3">
        <p>파일 첨부</p>
        <input type="file" name="file_file" accept="file/*" id="bizFile3">
        <div class="custom">
            <label for="bizFile3" class="btn fileBtn">
                <div class="filebox">
                    <i class="fa-solid fa-folder-plus fa-lg"></i>
                </div>
            </label>
            <span id="fileName3">또는<br>이곳에 추가할 파일을<br>끌어놓으세요.</span>
        </div>
        <button id="close-modal3">X</button>
    </div>
</div> 
{% endcomment %}
{% endblock %}